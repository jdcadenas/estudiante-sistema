{% extends "base.html" %}

{% block title %}Registro de Nuevo Estudiante{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h2 class="card-title text-center">Registro de Nuevo Estudiante</h2>
                <p class="text-center text-muted">Crea tu cuenta de usuario y completa tu perfil.</p>
            </div>
            <div class="card-body">
                <form method="post" novalidate>
                    {% csrf_token %}
                    
                    {% if form.errors or perfil_form.errors %}
                        <div class="alert alert-danger">
                            <p><strong>Por favor, corrige los siguientes errores:</strong></p>
                            <ul>
                                {% for field, errors in form.errors.items %}
                                    {% for error in errors %}
                                        <li>{{ field }}: {{ error }}</li>
                                    {% endfor %}
                                {% endfor %}
                                {% for field, errors in perfil_form.errors.items %}
                                    {% for error in errors %}
                                        <li>{{ field }}: {{ error }}</li>
                                    {% endfor %}
                                {% endfor %}
                            </ul>
                        </div>
                    {% endif %}
                    
                    <fieldset class="border p-3 mb-3">
                        <legend class="w-auto h5">Datos de la Cuenta</legend>
                        <!-- Renderiza campos del formulario de usuario aquí -->
                        <!-- Ejemplo: {{ form.username.label_tag }} {{ form.username }} -->
                         <div class="mb-3">
                            <label for="{{ form.username.id_for_label }}" class="form-label">Usuario:</label>
                            {{ form.username }}
                        </div>
                         <div class="mb-3">
                            <label for="{{ form.password.id_for_label }}" class="form-label">Contraseña:</label>
                            {{ form.password }}
                        </div>
                        <div class="mb-3">
                            <label for="{{ form.password2.id_for_label }}" class="form-label">Confirmar Contraseña:</label>
                            {{ form.password2 }}
                        </div>
                    </fieldset>

                    <fieldset class="border p-3 mb-3">
                        <legend class="w-auto h5">Datos del Perfil del Estudiante</legend>
                        <!-- Renderiza campos del formulario de perfil aquí -->
                        <!-- Ejemplo: {{ perfil_form.nombres.label_tag }} {{ perfil_form.nombres }} -->
                        <div class="mb-3">
                            <label for="{{ perfil_form.cedula.id_for_label }}" class="form-label">Cédula:</label>
                            {{ perfil_form.cedula }}
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="{{ perfil_form.nombres.id_for_label }}" class="form-label">Nombres:</label>
                                {{ perfil_form.nombres }}
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="{{ perfil_form.apellidos.id_for_label }}" class="form-label">Apellidos:</label>
                                {{ perfil_form.apellidos }}
                            </div>
                        </div>
                        <div class="row">
                             <div class="col-md-6 mb-3">
                                <label for="{{ perfil_form.grado.id_for_label }}" class="form-label">Grado:</label>
                                {{ perfil_form.grado }}
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="{{ perfil_form.grupo.id_for_label }}" class="form-label">Grupo:</label>
                                {{ perfil_form.grupo }}
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="{{ perfil_form.curso.id_for_label }}" class="form-label">Curso:</label>
                            {{ perfil_form.curso }}
                        </div>
                    </fieldset>
                    
                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary btn-lg">Registrarse</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
